  <div class="container-fluid px-4">

    <div class="d-flex align-items-center gap-3">
      <button class="btn btn-light text-primary fw-semibold px-4 py-2 rounded-pill shadow-sm"
              (click)="clickTopEvent()"
              style="transition: all 0.3s ease;">
        <span style="font-size: 1.2rem;"></span> Meilleurs Favoris
      </button>

     <!-- <div class="dropdown" *ngIf="likedEvents.length > 0">
        <button class="btn btn-light position-relative px-4 py-2 rounded-pill shadow-sm"
                id="likedDropdown"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                style="transition: all 0.3s ease;">
          <span style="font-size: 1.2rem;">‚ù§Ô∏è</span> Mes Favoris
          <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
            {{ likedEvents.length }}
          </span>
        </button>
        <ul class="dropdown-menu dropdown-menu-end shadow-lg border-0 mt-2"
            aria-labelledby="likedDropdown"
            style="min-width: 300px; border-radius: 15px;">
          <li *ngFor="let ev of likedEvents" class="dropdown-item-wrapper">
            <a class="dropdown-item py-3 px-4"
               [routerLink]="['./detail', ev.id]"
               style="transition: all 0.2s ease; border-radius: 10px;">
              <span style="font-size: 1.1rem;">üé´</span> {{ ev.title }}
            </a>
          </li>
        </ul>
      </div>-->
    </div>
  </div>


<div class="container py-5">
  <!-- En-t√™te avec recherche -->
  <div class="text-center mb-5">
    <h1 class="display-4 fw-bold mb-3" style="color: #667eea;">
      D√©couvrez nos √âv√©nements
    </h1>
    <p class="lead text-muted mb-4">Trouvez l'exp√©rience parfaite pour vous</p>

    <div class="row justify-content-center">
      <div class="col-lg-6">
        <div class="position-relative">
          <input type="text"
                 class="form-control form-control-lg shadow-sm"
                 placeholder="üîç Rechercher un √©v√©nement..."
                 [(ngModel)]="searchTerm"
                 style="border-radius: 50px; padding: 15px 25px; border: 2px solid #e0e0e0;">
        </div>
      </div>
    </div>
  </div>

  <!-- Grille d'√©v√©nements -->
  <div class="row g-4">
    <div class="col-lg-4 col-md-6" *ngFor="let e of getFilteredEvents()">
      <div class="card border-0 shadow-lg h-100 overflow-hidden"
           style="border-radius: 20px; transition: all 0.3s ease; cursor: pointer;"
           onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 20px 40px rgba(0,0,0,0.15)';"
           onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.1)';">

        <!-- Image avec overlay -->
        <div class="position-relative overflow-hidden" style="height: 250px;">
          <img src="{{e.imageUrl}}"
               [alt]="e.title"
               [title]="e.title"
               class="card-img-top"
               style="height: 100%; object-fit: cover; transition: transform 0.5s ease;"
               onmouseover="this.style.transform='scale(1.1)';"
               onmouseout="this.style.transform='scale(1)';">

          <!-- Badge prix en overlay -->
          <div class="position-absolute top-0 end-0 m-3">
            <span class="badge bg-white text-dark px-3 py-2 shadow-sm fw-bold"
                  style="border-radius: 20px; font-size: 1rem;">
              {{ e.price }}
            </span>
          </div>

          <!-- Badge places disponibles -->
          <div class="position-absolute bottom-0 start-0 m-3">
            <span class="badge px-3 py-2 shadow-sm fw-semibold"
                  [style.background]="e.nbPlaces > 50 ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)'"
                  style="border-radius: 20px; font-size: 0.9rem;">
              {{ e.nbPlaces }} places
            </span>
          </div>
        </div>

        <div class="card-body p-4">
          <!-- Titre -->
          <h5 class="card-title fw-bold mb-3" style="color: #2d3748; font-size: 1.3rem;">
            {{ e.title }}
          </h5>

          <!-- Localisation et date -->
          <div class="mb-3">
            <p class="mb-2 text-muted">
              <span style="font-size: 1.1rem;">üìç</span>
              <span class="fw-semibold">{{ e.location }}</span>
            </p>
            <p class="mb-0 text-muted">
              <span style="font-size: 1.1rem;">üìÖ</span>
              <span class="fw-semibold">{{ e.date | date:'dd MMMM yyyy' }}</span>
            </p>
          </div>

          <!-- Description -->
          <p class="text-secondary mb-4" style="font-size: 0.95rem; line-height: 1.6;">
            {{ e.description }}
          </p>

          <!-- Actions -->
          <div class="d-flex justify-content-between align-items-center">
            <!-- Bouton Like -->
            <button class="btn btn-outline-danger rounded-pill px-4 py-2 d-flex align-items-center gap-2"
                    (click)="likeEvent(e)"
                    style="transition: all 0.3s ease; border-width: 2px;">
              <span style="font-size: 1.2rem;">‚ù§Ô∏è</span>
              <span class="fw-semibold">{{ e.nbrLike }}</span>
            </button>

            <!-- Bouton D√©tails -->
            <a [routerLink]="['./detail', e.id]"
               class="btn btn-primary rounded-pill px-4 py-2 fw-semibold shadow-sm"
               style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; transition: all 0.3s ease;">
              Voir d√©tails ‚Üí
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Message si aucun r√©sultat -->
  <div *ngIf="getFilteredEvents().length === 0" class="text-center py-5">
    <div style="font-size: 4rem; opacity: 0.3;">üîç</div>
    <h3 class="text-muted mt-3">Aucun √©v√©nement trouv√©</h3>
    <p class="text-secondary">Essayez une autre recherche</p>
  </div>

  <!-- Composant top-event avec style am√©lior√© -->
  <div *ngIf="showBest" class="mt-5">
    <app-top-event [bestEvents]="topEvents"></app-top-event>
  </div>
</div>

<style>
  /* Animation pour les boutons */
  .btn:hover {
    transform: translateY(-2px);
  }

  /* Style pour les items du dropdown */
  .dropdown-item-wrapper .dropdown-item:hover {
    background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
  }

  /* Animation de chargement */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .col-lg-4, .col-md-6 {
    animation: fadeIn 0.5s ease-out;
  }

  /* Style personnalis√© pour le focus des inputs */
  .form-control:focus {
    border-color: #667eea;
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
  }

  /* Responsive improvements */
  @media (max-width: 768px) {
    .display-4 {
      font-size: 2rem;
    }

    .card-body {
      padding: 1.5rem !important;
    }
  }
</style>
